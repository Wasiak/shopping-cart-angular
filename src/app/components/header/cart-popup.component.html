<div class="cart-popup-container">
  <button class="cart-icon-btn" (click)="togglePopup()">
    <span class="cart-icon">
      <!-- Simple SVG cart icon -->
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2zM7.16 16l.84-2h7.99c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1 1 0 0 0 20 5H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7.42c-.14 0-.25-.11-.25-.25z" fill="#444"/>
      </svg>
      <span class="cart-count" *ngIf="cartCount() > 0">{{ cartCount() }}</span>
    </span>
  </button>
  <div class="cart-popup" *ngIf="showPopup()">
    <div class="cart-popup-header">
      <span class="cart-popup-title">{{ cartCount() }} ITEM{{ cartCount() !== 1 ? 'S' : '' }} IN CART</span>
      <span class="cart-popup-total">${{ totalPrice().toFixed(2) }}</span>
      <button class="cart-popup-clear" (click)="clearCart()" [disabled]="cartCount() === 0">CLEAR CART</button>
    </div>
    <div class="cart-popup-list">
      <div class="cart-popup-item" *ngFor="let item of cart()">
        <img class="cart-popup-thumb" [src]="item.thumb || item.image" [alt]="item.title">
        <div class="cart-popup-info">
          <div class="cart-popup-item-title">{{ item.title }}</div>
          <a class="cart-popup-remove" (click)="removeItem(item)">Remove</a>
        </div>
        <div class="cart-popup-item-price">${{ item.currentPrice.toFixed(2) }}</div>
      </div>
    </div>
  </div>
</div>
